diff --git a/node_modules/lage/dist/lage.js b/node_modules/lage/dist/lage.js
index 71e5c6b..687f238 100755
--- a/node_modules/lage/dist/lage.js
+++ b/node_modules/lage/dist/lage.js
@@ -412,7 +412,7 @@ ${Ca(this,tl).stderrBuffer}`;await(0,zrt.writeFile)(c,u),r.verbose(`>> Saved cac
 `);for(let n of r){let i=n.match(/("(\\"|[^"])+")|(\S+\s*)/g);if(i&&i.length>1){let[s,...o]=i,a=s.startsWith("R")?o[o.length-1]:o.join("");a=Bpe(a),e.set(a,s.trimRight())}}return e}function iit(t,e,r){let n=new Map;if(t.length){let i=xpe.default.sync(r||"git",["hash-object","--stdin-paths"],{input:t.map(a=>o_r.resolve(e,a)).join(`
 `)});if(i.exitCode!==0)throw new Error(`git hash-object exited with status ${i.exitCode}: ${i.stderr}`);let o=i.stdout.trim().split(`
 `);if(o.length!==t.length)throw new Error(`Passed ${t.length} file paths to Git to hash, but received ${o.length} hashes.`);for(let a=0;a<o.length;a++){let c=o[a],l=t[a];n.set(l,c)}}return n}function sit(t,e){let r=xpe.default.sync(e||"git",["ls-tree","HEAD","-r"],{cwd:t});if(r.exitCode!==0)throw new Error(`git ls-tree exited with status ${r.exitCode}: ${r.stderr}`);return r.stdout}function oit(t,e){let r=xpe.default.sync(e||"git",["status","-s","-u","."],{cwd:t});if(r.exitCode!==0)throw new Error(`git status exited with status ${r.exitCode}: ${r.stderr}`);return r.stdout}function l_r(t=process.cwd(),e,r){let n=sit(t,r),i=rit(n);if(e)for(let u of e)i.delete(u);let s=oit(t,r),o=nit(s),a=[],c=new Set(e);for(let[u,d]of o)d==="D"||d.length===2&&d.charAt(1)==="D"?i.delete(u):c.has(u)||a.push(u);let l=iit(a,t,r);for(let[u,d]of l)i.set(u,d);return i}});var YL=A(kpe=>{"use strict";Object.defineProperty(kpe,"__esModule",{value:!0});Object.defineProperty(kpe,"FileHasher",{enumerable:!0,get:function(){return Ope}});var vN=dit(Yn()),GL=dit(require("path")),Ppe=require("glob-hasher"),u_r=require("node:readline"),d_r=ait();function p_r(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f_r(t,e){return e.get?e.get.call(t):e.value}function h_r(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function uit(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function $h(t,e){var r=uit(t,e,"get");return f_r(t,r)}function cit(t,e,r){p_r(t,e),e.set(t,r)}function lit(t,e,r){var n=uit(t,e,"set");return h_r(t,n,r),r}function m_r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dit(t){return t&&t.__esModule?t:{default:t}}var PE=new WeakMap,b_=new WeakMap,Ope=class{async getHashesFromGit(){let{root:e}=this.options,r=await(0,d_r.getPackageDeps)(e),n=[...r.keys()],i=(0,Ppe.stat)(n,{cwd:e})??{};for(let[s,o]of Object.entries(i)){let a=r.get(s);if(a){let{size:c,mtime:l}=o;$h(this,PE)[s]={hash:a,size:c,mtime:l}}}this.writeManifest()}async readManifest(){return new Promise(e=>{if(!vN.default.existsSync($h(this,b_))){this.getHashesFromGit().then(()=>e());return}let r=vN.default.createReadStream($h(this,b_),"utf-8"),n=(0,u_r.createInterface)({input:r,crlfDelay:1/0}),i=[];n.on("line",s=>{i=s.split("\0"),$h(this,PE)[i[0]]={mtime:BigInt(i[1]),size:parseInt(i[2]),hash:i[3]}}),r.on("end",()=>{n.close(),e()})})}writeManifest(){vN.default.mkdirSync(GL.default.dirname($h(this,b_)),{recursive:!0});let e=Object.entries($h(this,PE)).map(([r,n])=>`${r}\0${n.mtime.toString()}\0${n.size.toString()}\0${n.hash}`);vN.default.writeFileSync($h(this,b_),e.join(`
-`),"utf-8")}hash(e){let r={},n=[],i=(0,Ppe.stat)(e,{cwd:this.options.root})??{};for(let o of e){let a=i[o],c=$h(this,PE)[o];c&&a.mtime===c.mtime&&a.size==c.size?r[o]=c.hash:n.push(o)}let s=(0,Ppe.hash)(n,{cwd:this.options.root,concurrency:4})??{};for(let[o,a]of Object.entries(s)){let c=vN.default.statSync(GL.default.join(this.options.root,o),{bigint:!0});$h(this,PE)[o]={mtime:c.mtimeMs,size:Number(c.size),hash:a??""},r[o]=a??""}return r}constructor(e){m_r(this,"options",void 0),cit(this,PE,{writable:!0,value:void 0}),cit(this,b_,{writable:!0,value:void 0}),this.options=e,lit(this,PE,{});let{root:r}=e,n=GL.default.join(r,"node_modules",".cache","lage");lit(this,b_,GL.default.join(n,"file_hashes.manifest"))}}});var WL=A(ru=>{"use strict";ru.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;ru.find=(t,e)=>t.nodes.find(r=>r.type===e);ru.exceedsLimit=(t,e,r=1,n)=>n===!1||!ru.isInteger(t)||!ru.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=n;ru.escapeNode=(t,e=0,r)=>{let n=t.nodes[e];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};ru.encloseBrace=t=>t.type!=="brace"||t.commas>>0+t.ranges>>0?!1:(t.invalid=!0,!0);ru.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:!(t.commas>>0+t.ranges>>0)||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;ru.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;ru.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);ru.flatten=(...t)=>{let e=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];if(Array.isArray(s)){r(s);continue}s!==void 0&&e.push(s)}return e};return r(t),e}});var JL=A((t9n,fit)=>{"use strict";var pit=WL();fit.exports=(t,e={})=>{let r=(n,i={})=>{let s=e.escapeInvalid&&pit.isInvalidBrace(i),o=n.invalid===!0&&e.escapeInvalid===!0,a="";if(n.value)return(s||o)&&pit.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let c of n.nodes)a+=r(c);return a};return r(t)}});var Mpe=A((r9n,vit)=>{"use strict";var A_r=require("util"),mit=kG(),hit=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),g_r=t=>e=>t===!0?Number(e):String(e),Dpe=t=>typeof t=="number"||typeof t=="string"&&t!=="",CN=t=>Number.isInteger(+t),Qpe=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},y_r=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,E_r=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},XL=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},v_r=(t,e,r)=>{t.negatives.sort((a,c)=>a<c?-1:a>c?1:0),t.positives.sort((a,c)=>a<c?-1:a>c?1:0);let n=e.capture?"":"?:",i="",s="",o;return t.positives.length&&(i=t.positives.map(a=>XL(String(a),r)).join("|")),t.negatives.length&&(s=`-(${n}${t.negatives.map(a=>XL(String(a),r)).join("|")})`),i&&s?o=`${i}|${s}`:o=i||s,e.wrap?`(${n}${o})`:o},Ait=(t,e,r,n)=>{if(r)return mit(t,e,{wrap:!1,...n});let i=String.fromCharCode(t);if(t===e)return i;let s=String.fromCharCode(e);return`[${i}-${s}]`},git=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${t.join("|")})`:t.join("|")}return mit(t,e,r)},yit=(...t)=>new RangeError("Invalid range arguments: "+A_r.inspect(...t)),Eit=(t,e,r)=>{if(r.strictRanges===!0)throw yit([t,e]);return[]},C_r=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},b_r=(t,e,r=1,n={})=>{let i=Number(t),s=Number(e);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw yit([t,e]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(t),c=String(e),l=String(r);r=Math.max(Math.abs(r),1);let u=Qpe(a)||Qpe(c)||Qpe(l),d=u?Math.max(a.length,c.length,l.length):0,p=u===!1&&y_r(t,e,n)===!1,f=n.transform||g_r(p);if(n.toRegex&&r===1)return Ait(XL(t,d),XL(e,d),!0,n);let h={negatives:[],positives:[]},m=b=>h[b<0?"negatives":"positives"].push(Math.abs(b)),E=[],C=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?m(i):E.push(E_r(f(i,C),d,p)),i=o?i-r:i+r,C++;return n.toRegex===!0?r>1?v_r(h,n,d):git(E,null,{wrap:!1,...n}):E},w_r=(t,e,r=1,n={})=>{if(!CN(t)&&t.length>1||!CN(e)&&e.length>1)return Eit(t,e,n);let i=n.transform||(p=>String.fromCharCode(p)),s=`${t}`.charCodeAt(0),o=`${e}`.charCodeAt(0),a=s>o,c=Math.min(s,o),l=Math.max(s,o);if(n.toRegex&&r===1)return Ait(c,l,!1,n);let u=[],d=0;for(;a?s>=o:s<=o;)u.push(i(s,d)),s=a?s-r:s+r,d++;return n.toRegex===!0?git(u,null,{wrap:!1,options:n}):u},KL=(t,e,r,n={})=>{if(e==null&&Dpe(t))return[t];if(!Dpe(t)||!Dpe(e))return Eit(t,e,n);if(typeof r=="function")return KL(t,e,1,{transform:r});if(hit(r))return KL(t,e,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,CN(r)?CN(t)&&CN(e)?b_r(t,e,r,i):w_r(t,e,Math.max(Math.abs(r),1),i):r!=null&&!hit(r)?C_r(r,i):KL(t,e,1,r)};vit.exports=KL});var wit=A((n9n,bit)=>{"use strict";var __r=Mpe(),Cit=WL(),I_r=(t,e={})=>{let r=(n,i={})=>{let s=Cit.isInvalidBrace(i),o=n.invalid===!0&&e.escapeInvalid===!0,a=s===!0||o===!0,c=e.escapeInvalid===!0?"\\":"",l="";if(n.isOpen===!0)return c+n.value;if(n.isClose===!0)return console.log("node.isClose",c,n.value),c+n.value;if(n.type==="open")return a?c+n.value:"(";if(n.type==="close")return a?c+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let u=Cit.reduce(n.nodes),d=__r(...u,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(d.length!==0)return u.length>1&&d.length>1?`(${d})`:d}if(n.nodes)for(let u of n.nodes)l+=r(u,n);return l};return r(t)};bit.exports=I_r});var Sit=A((i9n,Iit)=>{"use strict";var S_r=Mpe(),_it=JL(),w_=WL(),OE=(t="",e="",r=!1)=>{let n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?w_.flatten(e).map(i=>`{${i}}`):e;for(let i of t)if(Array.isArray(i))for(let s of i)n.push(OE(s,e,r));else for(let s of e)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?OE(i,s,r):i+s);return w_.flatten(n)},T_r=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(OE(a.pop(),_it(i,e)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(OE(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let d=w_.reduce(i.nodes);if(w_.exceedsLimit(...d,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let p=S_r(...d,e);p.length===0&&(p=_it(i,e)),a.push(OE(a.pop(),p)),i.nodes=[];return}let c=w_.encloseBrace(i),l=i.queue,u=i;for(;u.type!=="brace"&&u.type!=="root"&&u.parent;)u=u.parent,l=u.queue;for(let d=0;d<i.nodes.length;d++){let p=i.nodes[d];if(p.type==="comma"&&i.type==="brace"){d===1&&l.push(""),l.push("");continue}if(p.type==="close"){a.push(OE(a.pop(),l,c));continue}if(p.value&&p.type!=="open"){l.push(OE(l.pop(),p.value));continue}p.nodes&&n(p,i)}return l};return w_.flatten(n(t))};Iit.exports=T_r});var Rit=A((s9n,Tit)=>{"use strict";Tit.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
+`),"utf-8")}hash(e){let r={},n=[],i=(0,Ppe.stat)(e,{cwd:this.options.root})??{};for(let o of e){let a=i[o],c=$h(this,PE)[o];console.log("LOG",o);c&&a.mtime===c.mtime&&a.size==c.size?r[o]=c.hash:n.push(o)}let s=(0,Ppe.hash)(n,{cwd:this.options.root,concurrency:4})??{};for(let[o,a]of Object.entries(s)){let c=vN.default.statSync(GL.default.join(this.options.root,o),{bigint:!0});$h(this,PE)[o]={mtime:c.mtimeMs,size:Number(c.size),hash:a??""},r[o]=a??""}return r}constructor(e){m_r(this,"options",void 0),cit(this,PE,{writable:!0,value:void 0}),cit(this,b_,{writable:!0,value:void 0}),this.options=e,lit(this,PE,{});let{root:r}=e,n=GL.default.join(r,"node_modules",".cache","lage");lit(this,b_,GL.default.join(n,"file_hashes.manifest"))}}});var WL=A(ru=>{"use strict";ru.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;ru.find=(t,e)=>t.nodes.find(r=>r.type===e);ru.exceedsLimit=(t,e,r=1,n)=>n===!1||!ru.isInteger(t)||!ru.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=n;ru.escapeNode=(t,e=0,r)=>{let n=t.nodes[e];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};ru.encloseBrace=t=>t.type!=="brace"||t.commas>>0+t.ranges>>0?!1:(t.invalid=!0,!0);ru.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:!(t.commas>>0+t.ranges>>0)||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;ru.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;ru.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);ru.flatten=(...t)=>{let e=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];if(Array.isArray(s)){r(s);continue}s!==void 0&&e.push(s)}return e};return r(t),e}});var JL=A((t9n,fit)=>{"use strict";var pit=WL();fit.exports=(t,e={})=>{let r=(n,i={})=>{let s=e.escapeInvalid&&pit.isInvalidBrace(i),o=n.invalid===!0&&e.escapeInvalid===!0,a="";if(n.value)return(s||o)&&pit.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let c of n.nodes)a+=r(c);return a};return r(t)}});var Mpe=A((r9n,vit)=>{"use strict";var A_r=require("util"),mit=kG(),hit=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),g_r=t=>e=>t===!0?Number(e):String(e),Dpe=t=>typeof t=="number"||typeof t=="string"&&t!=="",CN=t=>Number.isInteger(+t),Qpe=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},y_r=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,E_r=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},XL=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},v_r=(t,e,r)=>{t.negatives.sort((a,c)=>a<c?-1:a>c?1:0),t.positives.sort((a,c)=>a<c?-1:a>c?1:0);let n=e.capture?"":"?:",i="",s="",o;return t.positives.length&&(i=t.positives.map(a=>XL(String(a),r)).join("|")),t.negatives.length&&(s=`-(${n}${t.negatives.map(a=>XL(String(a),r)).join("|")})`),i&&s?o=`${i}|${s}`:o=i||s,e.wrap?`(${n}${o})`:o},Ait=(t,e,r,n)=>{if(r)return mit(t,e,{wrap:!1,...n});let i=String.fromCharCode(t);if(t===e)return i;let s=String.fromCharCode(e);return`[${i}-${s}]`},git=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${t.join("|")})`:t.join("|")}return mit(t,e,r)},yit=(...t)=>new RangeError("Invalid range arguments: "+A_r.inspect(...t)),Eit=(t,e,r)=>{if(r.strictRanges===!0)throw yit([t,e]);return[]},C_r=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},b_r=(t,e,r=1,n={})=>{let i=Number(t),s=Number(e);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw yit([t,e]);return[]}i===0&&(i=0),s===0&&(s=0);let o=i>s,a=String(t),c=String(e),l=String(r);r=Math.max(Math.abs(r),1);let u=Qpe(a)||Qpe(c)||Qpe(l),d=u?Math.max(a.length,c.length,l.length):0,p=u===!1&&y_r(t,e,n)===!1,f=n.transform||g_r(p);if(n.toRegex&&r===1)return Ait(XL(t,d),XL(e,d),!0,n);let h={negatives:[],positives:[]},m=b=>h[b<0?"negatives":"positives"].push(Math.abs(b)),E=[],C=0;for(;o?i>=s:i<=s;)n.toRegex===!0&&r>1?m(i):E.push(E_r(f(i,C),d,p)),i=o?i-r:i+r,C++;return n.toRegex===!0?r>1?v_r(h,n,d):git(E,null,{wrap:!1,...n}):E},w_r=(t,e,r=1,n={})=>{if(!CN(t)&&t.length>1||!CN(e)&&e.length>1)return Eit(t,e,n);let i=n.transform||(p=>String.fromCharCode(p)),s=`${t}`.charCodeAt(0),o=`${e}`.charCodeAt(0),a=s>o,c=Math.min(s,o),l=Math.max(s,o);if(n.toRegex&&r===1)return Ait(c,l,!1,n);let u=[],d=0;for(;a?s>=o:s<=o;)u.push(i(s,d)),s=a?s-r:s+r,d++;return n.toRegex===!0?git(u,null,{wrap:!1,options:n}):u},KL=(t,e,r,n={})=>{if(e==null&&Dpe(t))return[t];if(!Dpe(t)||!Dpe(e))return Eit(t,e,n);if(typeof r=="function")return KL(t,e,1,{transform:r});if(hit(r))return KL(t,e,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,CN(r)?CN(t)&&CN(e)?b_r(t,e,r,i):w_r(t,e,Math.max(Math.abs(r),1),i):r!=null&&!hit(r)?C_r(r,i):KL(t,e,1,r)};vit.exports=KL});var wit=A((n9n,bit)=>{"use strict";var __r=Mpe(),Cit=WL(),I_r=(t,e={})=>{let r=(n,i={})=>{let s=Cit.isInvalidBrace(i),o=n.invalid===!0&&e.escapeInvalid===!0,a=s===!0||o===!0,c=e.escapeInvalid===!0?"\\":"",l="";if(n.isOpen===!0)return c+n.value;if(n.isClose===!0)return console.log("node.isClose",c,n.value),c+n.value;if(n.type==="open")return a?c+n.value:"(";if(n.type==="close")return a?c+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let u=Cit.reduce(n.nodes),d=__r(...u,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(d.length!==0)return u.length>1&&d.length>1?`(${d})`:d}if(n.nodes)for(let u of n.nodes)l+=r(u,n);return l};return r(t)};bit.exports=I_r});var Sit=A((i9n,Iit)=>{"use strict";var S_r=Mpe(),_it=JL(),w_=WL(),OE=(t="",e="",r=!1)=>{let n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?w_.flatten(e).map(i=>`{${i}}`):e;for(let i of t)if(Array.isArray(i))for(let s of i)n.push(OE(s,e,r));else for(let s of e)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?OE(i,s,r):i+s);return w_.flatten(n)},T_r=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(i,s={})=>{i.queue=[];let o=s,a=s.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(i.invalid||i.dollar){a.push(OE(a.pop(),_it(i,e)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(OE(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let d=w_.reduce(i.nodes);if(w_.exceedsLimit(...d,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let p=S_r(...d,e);p.length===0&&(p=_it(i,e)),a.push(OE(a.pop(),p)),i.nodes=[];return}let c=w_.encloseBrace(i),l=i.queue,u=i;for(;u.type!=="brace"&&u.type!=="root"&&u.parent;)u=u.parent,l=u.queue;for(let d=0;d<i.nodes.length;d++){let p=i.nodes[d];if(p.type==="comma"&&i.type==="brace"){d===1&&l.push(""),l.push("");continue}if(p.type==="close"){a.push(OE(a.pop(),l,c));continue}if(p.value&&p.type!=="open"){l.push(OE(l.pop(),p.value));continue}p.nodes&&n(p,i)}return l};return w_.flatten(n(t))};Iit.exports=T_r});var Rit=A((s9n,Tit)=>{"use strict";Tit.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
 `,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Oit=A((o9n,Pit)=>{"use strict";var R_r=JL(),{MAX_LENGTH:xit,CHAR_BACKSLASH:Lpe,CHAR_BACKTICK:x_r,CHAR_COMMA:B_r,CHAR_DOT:N_r,CHAR_LEFT_PARENTHESES:P_r,CHAR_RIGHT_PARENTHESES:O_r,CHAR_LEFT_CURLY_BRACE:k_r,CHAR_RIGHT_CURLY_BRACE:D_r,CHAR_LEFT_SQUARE_BRACKET:Bit,CHAR_RIGHT_SQUARE_BRACKET:Nit,CHAR_DOUBLE_QUOTE:Q_r,CHAR_SINGLE_QUOTE:M_r,CHAR_NO_BREAK_SPACE:L_r,CHAR_ZERO_WIDTH_NOBREAK_SPACE:F_r}=Rit(),q_r=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},n=typeof r.maxLength=="number"?Math.min(xit,r.maxLength):xit;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);let i={type:"root",input:t,nodes:[]},s=[i],o=i,a=i,c=0,l=t.length,u=0,d=0,p,f=()=>t[u++],h=m=>{if(m.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&m.type==="text"){a.value+=m.value;return}return o.nodes.push(m),m.parent=o,m.prev=a,a=m,m};for(h({type:"bos"});u<l;)if(o=s[s.length-1],p=f(),!(p===F_r||p===L_r)){if(p===Lpe){h({type:"text",value:(e.keepEscaping?p:"")+f()});continue}if(p===Nit){h({type:"text",value:"\\"+p});continue}if(p===Bit){c++;let m;for(;u<l&&(m=f());){if(p+=m,m===Bit){c++;continue}if(m===Lpe){p+=f();continue}if(m===Nit&&(c--,c===0))break}h({type:"text",value:p});continue}if(p===P_r){o=h({type:"paren",nodes:[]}),s.push(o),h({type:"text",value:p});continue}if(p===O_r){if(o.type!=="paren"){h({type:"text",value:p});continue}o=s.pop(),h({type:"text",value:p}),o=s[s.length-1];continue}if(p===Q_r||p===M_r||p===x_r){let m=p,E;for(e.keepQuotes!==!0&&(p="");u<l&&(E=f());){if(E===Lpe){p+=E+f();continue}if(E===m){e.keepQuotes===!0&&(p+=E);break}p+=E}h({type:"text",value:p});continue}if(p===k_r){d++;let E={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:d,commas:0,ranges:0,nodes:[]};o=h(E),s.push(o),h({type:"open",value:p});continue}if(p===D_r){if(o.type!=="brace"){h({type:"text",value:p});continue}let m="close";o=s.pop(),o.close=!0,h({type:m,value:p}),d--,o=s[s.length-1];continue}if(p===B_r&&d>0){if(o.ranges>0){o.ranges=0;let m=o.nodes.shift();o.nodes=[m,{type:"text",value:R_r(o)}]}h({type:"comma",value:p}),o.commas++;continue}if(p===N_r&&d>0&&o.commas===0){let m=o.nodes;if(d===0||m.length===0){h({type:"text",value:p});continue}if(a.type==="dot"){if(o.range=[],a.value+=p,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){m.pop();let E=m[m.length-1];E.value+=a.value+p,a=E,o.ranges--;continue}h({type:"dot",value:p});continue}h({type:"text",value:p})}do if(o=s.pop(),o.type!=="root"){o.nodes.forEach(C=>{C.nodes||(C.type==="open"&&(C.isOpen=!0),C.type==="close"&&(C.isClose=!0),C.nodes||(C.type="text"),C.invalid=!0)});let m=s[s.length-1],E=m.nodes.indexOf(o);m.nodes.splice(E,1,...o.nodes)}while(s.length>0);return h({type:"eos"}),i};Pit.exports=q_r});var Qit=A((a9n,Dit)=>{"use strict";var kit=JL(),U_r=wit(),j_r=Sit(),H_r=Oit(),rl=(t,e={})=>{let r=[];if(Array.isArray(t))for(let n of t){let i=rl.create(n,e);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(rl.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};rl.parse=(t,e={})=>H_r(t,e);rl.stringify=(t,e={})=>kit(typeof t=="string"?rl.parse(t,e):t,e);rl.compile=(t,e={})=>(typeof t=="string"&&(t=rl.parse(t,e)),U_r(t,e));rl.expand=(t,e={})=>{typeof t=="string"&&(t=rl.parse(t,e));let r=j_r(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};rl.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?rl.compile(t,e):rl.expand(t,e);Dit.exports=rl});var jit=A((c9n,Uit)=>{"use strict";var Lit=require("util"),Fit=Qit(),Op=ly(),Fpe=zm(),Mit=t=>t===""||t==="./",qit=t=>{let e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},Sn=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,i=new Set,s=new Set,o=0,a=u=>{s.add(u.output),r&&r.onResult&&r.onResult(u)};for(let u=0;u<e.length;u++){let d=Op(String(e[u]),{...r,onResult:a},!0),p=d.state.negated||d.state.negatedExtglob;p&&o++;for(let f of t){let h=d(f,!0);(p?!h.isMatch:h.isMatch)&&(p?n.add(h.output):(n.delete(h.output),i.add(h.output)))}}let l=(o===e.length?[...s]:[...i]).filter(u=>!n.has(u));if(r&&l.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(u=>u.replace(/\\/g,"")):e}return l};Sn.match=Sn;Sn.matcher=(t,e)=>Op(t,e);Sn.isMatch=(t,e,r)=>Op(e,r)(t);Sn.any=Sn.isMatch;Sn.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,i=[],s=a=>{r.onResult&&r.onResult(a),i.push(a.output)},o=new Set(Sn(t,e,{...r,onResult:s}));for(let a of i)o.has(a)||n.add(a);return[...n]};Sn.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Lit.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>Sn.contains(t,n,r));if(typeof e=="string"){if(Mit(t)||Mit(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return Sn.isMatch(t,e,{...r,contains:!0})};Sn.matchKeys=(t,e,r)=>{if(!Fpe.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=Sn(Object.keys(t),e,r),i={};for(let s of n)i[s]=t[s];return i};Sn.some=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let s=Op(String(i),r);if(n.some(o=>s(o)))return!0}return!1};Sn.every=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let s=Op(String(i),r);if(!n.every(o=>s(o)))return!1}return!0};Sn.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Lit.inspect(t)}"`);return[].concat(e).every(n=>Op(n,r)(t))};Sn.capture=(t,e,r)=>{let n=Fpe.isWindows(r),s=Op.makeRe(String(t),{...r,capture:!0}).exec(n?Fpe.toPosixSlashes(e):e);if(s)return s.slice(1).map(o=>o===void 0?"":o)};Sn.makeRe=(...t)=>Op.makeRe(...t);Sn.scan=(...t)=>Op.scan(...t);Sn.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let i of Fit(String(n),e))r.push(Op.parse(i,e));return r};Sn.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!qit(t)?[t]:Fit(t,e)};Sn.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return Sn.braces(t,{...e,expand:!0})};Sn.hasBraces=qit;Uit.exports=Sn});var Hpe=A(jpe=>{"use strict";Object.defineProperty(jpe,"__esModule",{value:!0});Object.defineProperty(jpe,"PackageTree",{enumerable:!0,get:function(){return Upe}});var Hit=ZL(h_()),kE=ZL(require("path")),$_r=ZL(require("fs")),z_r=ZL(jit());function V_r(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function G_r(t,e){return e.get?e.get.call(t):e.value}function Y_r(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function $it(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function DE(t,e){var r=$it(t,e,"get");return G_r(t,r)}function qpe(t,e,r){V_r(t,e),e.set(t,r)}function __(t,e,r){var n=$it(t,e,"set");return Y_r(t,n,r),r}function W_r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZL(t){return t&&t.__esModule?t:{default:t}}var bN=new WeakMap,wN=new WeakMap,I_=new WeakMap,Upe=class{reset(){__(this,bN,{children:{},isPackage:!0}),__(this,wN,{}),__(this,I_,{})}async initialize(){let{root:e,includeUntracked:r,packageInfos:n}=this.options;this.reset();for(let s of Object.values(n)){let o=kE.default.dirname(s.packageJsonPath),a=kE.default.relative(e,o).split(/[\\/]/),c=DE(this,bN);for(let l of a)c.children[l]=c.children[l]||{children:{},isPackage:!1},c=c.children[l];c.isPackage=!0}let i=await(0,Hit.default)("git",["ls-files","-z"],{cwd:e});if(i.exitCode===0){let s=i.stdout.split("\0").filter(o=>!!o&&$_r.default.existsSync(kE.default.join(e,o)));this.addToPackageTree(s)}if(r){let s=await(0,Hit.default)("git",["ls-files","-o","-z","--exclude-standard"],{cwd:e});if(s.exitCode===0){let o=s.stdout.split("\0").filter(Boolean);this.addToPackageTree(o)}}}async addToPackageTree(e){let r=DE(this,wN);for(let n of e){let i=n.split(/[\\/]/),s=DE(this,bN),o=[],a=[];for(let l of i)if(s.children[l])s=s.children[l],o.push(l),s.isPackage&&(a=[...o]);else break;let c=a.join("/");r[c]=r[c]||[],r[c].push(n)}}getPackageFiles(e,r){let{root:n,packageInfos:i}=this.options,s=kE.default.relative(n,kE.default.dirname(i[e].packageJsonPath)).replace(/\\/g,"/"),o=DE(this,wN)[s];if(!o)return[];let a=`${e}\0${r.join("\0")}`;if(!DE(this,I_)[a]){let c=r.map(l=>l.startsWith("!")?`!${kE.default.join(s,l.slice(1)).replace(/\\/g,"/")}`:kE.default.join(s,l).replace(/\\/g,"/"));DE(this,I_)[a]=(0,z_r.default)(o,c,{dot:!0})}return DE(this,I_)[a]}constructor(e){W_r(this,"options",void 0),qpe(this,bN,{writable:!0,value:void 0}),qpe(this,wN,{writable:!0,value:void 0}),qpe(this,I_,{writable:!0,value:void 0}),this.options=e,__(this,bN,{children:{},isPackage:!0}),__(this,wN,{}),__(this,I_,{})}}});var zit=A($pe=>{"use strict";Object.defineProperty($pe,"__esModule",{value:!0});Object.defineProperty($pe,"expandInputPatterns",{enumerable:!0,get:function(){return J_r}});function J_r(t,e,r){let n={};for(let i of t)if(i.startsWith("^")||i.startsWith("!^")){let s=i.replace("^",""),o=[e.packageName],a=new Set;for(;o.length>0;){let c=o.pop();if(!a.has(c)&&(a.add(c),c!==e.packageName&&(n[c]=n[c]??[],n[c].push(s)),r.dependencies.has(c))){let l=r.dependencies.get(c);if(l)for(let u of l)o.push(u)}}}else{let s=e.packageName;n[s]=n[s]??[],n[s].push(i)}return n}});var Vpe=A(zpe=>{"use strict";Object.defineProperty(zpe,"__esModule",{value:!0});Object.defineProperty(zpe,"getInputFiles",{enumerable:!0,get:function(){return X_r}});var K_r=zit();function X_r(t,e,r){let n=t.inputs??["**/*"],i=(0,K_r.expandInputPatterns)(n,t,e),s=[];for(let[o,a]of Object.entries(i)){let c=r.getPackageFiles(o,a);s.push(...c)}return s}});var Git=A(Kpe=>{"use strict";Object.defineProperty(Kpe,"__esModule",{value:!0});Object.defineProperty(Kpe,"TargetHasher",{enumerable:!0,get:function(){return Jpe}});var Z_r=require("glob-hasher"),Gpe=wpe(),QE=Vit(require("fs")),_N=Vit(require("path")),Ype=cs(),eIr=z5(),Wpe=Ipe(),tIr=Wnt(),rIr=eit(),nIr=YL(),iIr=Hpe(),sIr=Vpe();function nl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vit(t){return t&&t.__esModule?t:{default:t}}var Jpe=class{getPackageInfos(e){let{root:r}=this.options,n={};if(e.length)for(let i of e)n[i.name]=i.packageJson;else{let i=_N.default.join(r,"package.json");if(QE.default.existsSync(i))try{let s=JSON.parse(QE.default.readFileSync(i,"utf-8")),o=(0,eIr.infoFromPackageJson)(s,i);o&&(n[o.name]=o)}catch(s){throw new Error(`Invalid package.json file detected ${i}: ${(s==null?void 0:s.message)||s}`)}}return n}ensureInitialized(){if(!this.initializedPromise)throw new Error("TargetHasher is not initialized")}async initialize(){let{environmentGlob:e,root:r}=this.options;if(this.initializedPromise){await this.initializedPromise;return}if(this.initializedPromise=Promise.all([this.fileHasher.readManifest().then(()=>(0,Gpe.globAsync)(e,{cwd:r})).then(n=>this.fileHasher.hash(n)).then(n=>this.globalInputsHash=n),(0,Ype.getWorkspacesAsync)(r).then(n=>this.workspaceInfo=n).then(()=>(this.packageInfos=this.getPackageInfos(this.workspaceInfo),this.dependencyMap=(0,Ype.createDependencyMap)(this.packageInfos,{withDevDependencies:!0,withPeerDependencies:!1}),this.packageTree=new iIr.PackageTree({root:r,packageInfos:this.packageInfos,includeUntracked:!0}),this.packageTree.initialize())),(0,Ype.parseLockFile)(r).then(n=>this.lockInfo=n)]),await this.initializedPromise,this.logger!==void 0){let n=(0,Wpe.hashStrings)(Object.values(this.globalInputsHash??{}));this.logger.verbose(`Global inputs hash: ${n}`)}}async hash(e){var C;this.ensureInitialized();let{root:r}=this.options;if(e.cwd===r&&e.cache){if(!e.inputs)throw new Error("Root-level targets must have `inputs` defined if it has cache enabled.");let b=await(0,Gpe.globAsync)(e.inputs,{cwd:r}),v=(0,Z_r.hash)(b,{cwd:r})??{},y=Object.values(v);return(0,Wpe.hashStrings)(y)}let{dependencies:n,devDependencies:i}=this.packageInfos[e.packageName],s=this.workspaceInfo,o=this.lockInfo,a={...n,...i},c=(0,tIr.resolveInternalDependencies)(a,s),l=(0,rIr.resolveExternalDependencies)(a,s,o),u=[...c,...l].sort(),d=(0,sIr.getInputFiles)(e,this.dependencyMap,this.packageTree),p=this.fileHasher.hash(d)??{},f=(C=e.dependencies)==null?void 0:C.sort().map(b=>this.targetHashes[b]),h=await this.getEnvironmentGlobHashes(r,e),m=[...Object.values(h),`${e.id}|${JSON.stringify(this.options.cliArgs)}`,this.options.cacheKey||"",...Object.values(p),...u,...f].filter(Boolean),E=(0,Wpe.hashStrings)(m);return this.targetHashes[e.id]=E,this.targetHashesLog[e.id]={fileHashes:p,globalFileHashes:h},E}writeTargetHashesManifest(){for(let[e,{fileHashes:r,globalFileHashes:n}]of Object.entries(this.targetHashesLog)){let i=_N.default.join(this.targetHashesDirectory,`${e}.json`);QE.default.existsSync(_N.default.dirname(i))||QE.default.mkdirSync(_N.default.dirname(i),{recursive:!0}),QE.default.writeFileSync(i,JSON.stringify({fileHashes:r,globalFileHashes:n}),"utf-8")}}async getEnvironmentGlobHashes(e,r){return r.environmentGlob?this.fileHasher.hash(await(0,Gpe.globAsync)(r.environmentGlob??[],{cwd:e})):this.globalInputsHash??{}}async cleanup(){this.writeTargetHashesManifest(),await this.fileHasher.writeManifest()}constructor(e){nl(this,"options",void 0),nl(this,"targetHashesLog",void 0),nl(this,"targetHashesDirectory",void 0),nl(this,"logger",void 0),nl(this,"fileHasher",void 0),nl(this,"packageTree",void 0),nl(this,"initializedPromise",void 0),nl(this,"packageInfos",void 0),nl(this,"workspaceInfo",void 0),nl(this,"globalInputsHash",void 0),nl(this,"lockInfo",void 0),nl(this,"targetHashes",void 0),nl(this,"dependencyMap",void 0),this.options=e,this.targetHashesLog={},this.packageInfos={},this.targetHashes={},this.dependencyMap={dependencies:new Map,dependents:new Map};let{root:r,logger:n}=e;this.logger=n,this.fileHasher=new nIr.FileHasher({root:r}),this.targetHashesDirectory=_N.default.join(r,"node_modules",".cache","lage","hashes"),QE.default.existsSync(this.targetHashesDirectory)||QE.default.mkdirSync(this.targetHashesDirectory,{recursive:!0})}}});var Zpe=A(Xpe=>{"use strict";Object.defineProperty(Xpe,"__esModule",{value:!0});function oIr(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}oIr(Xpe,{FileHasher:function(){return uIr.FileHasher},PackageTree:function(){return cIr.PackageTree},TargetHasher:function(){return aIr.TargetHasher},getInputFiles:function(){return lIr.getInputFiles},hashStrings:function(){return dIr.hashStrings}});var aIr=Git(),cIr=Hpe(),lIr=Vpe(),uIr=YL(),dIr=Ipe()});var tfe=A(efe=>{"use strict";Object.defineProperty(efe,"__esModule",{value:!0});Object.defineProperty(efe,"createCache",{enumerable:!0,get:function(){return fIr}});var pIr=Zpe();async function fIr(t){let{cacheOptions:e,root:r,cliArgs:n,logger:i}=t,s=new pIr.TargetHasher({root:r,environmentGlob:(e==null?void 0:e.environmentGlob)??[],cacheKey:e==null?void 0:e.cacheKey,cliArgs:n,logger:i});return await s.initialize(),{hasher:s}}});var IN=A(rfe=>{"use strict";Object.defineProperty(rfe,"__esModule",{value:!0});Object.defineProperty(rfe,"runnerPickerOptions",{enumerable:!0,get:function(){return hIr}});function hIr(t,e,r){return{npmScript:{script:require.resolve("./runners/NpmScriptRunner.js"),options:{nodeArg:t,taskArgs:r,npmCmd:e}},worker:{script:require.resolve("./runners/WorkerRunner.js"),options:{taskArgs:r}},noop:{script:require.resolve("./runners/NoOpRunner.js"),options:{}}}}});var sfe=A(ife=>{"use strict";Object.defineProperty(ife,"__esModule",{value:!0});Object.defineProperty(ife,"optimizeTargetGraph",{enumerable:!0,get:function(){return mIr}});var nfe=Um();async function mIr(t,e,r){let n=await(0,nfe.removeNodes)([...t.targets.values()],async o=>o.type==="noop"?!0:o.id===(0,nfe.getStartTargetId)()?!!r:!await(await e.pick(o)).shouldRun(o));if(r)return n;let i=(0,nfe.transitiveReduction)(n),s=new Map;for(let o of i)for(let a of o.dependencies)s.has(a)||s.set(a,new Set),s.get(a).add(o.id);for(let o of i){let a=new Set;s.has(o.id)&&s.get(o.id).forEach(c=>a.add(c)),o.dependents=Array.from(a)}return i}});var Wit=A(ofe=>{"use strict";Object.defineProperty(ofe,"__esModule",{value:!0});Object.defineProperty(ofe,"runAction",{enumerable:!0,get:function(){return TIr}});var AIr=sP(),gIr=cb(),yIr=AK(),eF=Zd(),Yit=cs(),EIr=YR(),vIr=npe(),CIr=SIr(Ya()),bIr=spe(),wIr=tfe(),_Ir=IN(),IIr=sfe();function SIr(t){return t&&t.__esModule?t:{default:t}}async function TIr(t,e){var y;let r=process.cwd(),n=await(0,eF.getConfig)(r),i=(0,eF.getConcurrency)(t.concurrency,n.concurrency),s=t.allowNoTargetRuns||n.allowNoTargetRuns,o=(0,CIr.default)(),a=(0,EIr.initializeReporters)(o,{...t,concurrency:i}),c=(0,Yit.getWorkspaceRoot)(process.cwd()),l=(0,Yit.getPackageInfos)(c),{tasks:u,taskArgs:d}=(0,gIr.filterArgsForTasks)(e.args),p=await(0,AIr.createTargetGraph)({logger:o,root:c,dependencies:t.dependencies,dependents:t.dependents&&!t.to,ignore:t.ignore.concat(n.ignore),pipeline:n.pipeline,repoWideChanges:n.repoWideChanges,scope:(t.scope??[]).concat(t.to??[]),since:t.since,outputs:n.cacheOptions.outputGlob,tasks:u,packageInfos:l,priorities:n.priorities});xIr(p,s),o.verbose(`Running with ${i} workers`);let f=(0,yIr.filterPipelineDefinitions)(p.targets.values(),n.pipeline),h=(0,eF.getMaxWorkersPerTaskFromOptions)(t.maxWorkersPerTask),{hasher:m}=await(0,wIr.createCache)({root:c,logger:o,cacheOptions:n.cacheOptions,cliArgs:d,skipLocalCache:t.skipLocalCache}),E=new vIr.SimpleScheduler({logger:o,concurrency:i,continueOnError:t.continue,shouldCache:t.cache,shouldResetCache:t.resetCache,workerData:{root:c,taskArgs:d,skipLocalCache:t.skipLocalCache,cacheOptions:n.cacheOptions,runners:{...(0,_Ir.runnerPickerOptions)(t.nodeArg,n.npmClient,d),...n.runners}},maxWorkersPerTask:new Map([...(0,eF.getMaxWorkersPerTask)(f,i),...h]),hasher:m,workerIdleMemoryLimit:n.workerIdleMemoryLimit}),C=await(0,IIr.optimizeTargetGraph)(p,E.runnerPicker,!1),b={targets:new Map(C.map(g=>[g.id,g]))},v=await E.run(c,b);await E.cleanup(),RIr(v,o.reporters);for(let g of a)await((y=g.cleanup)==null?void 0:y.call(g))}function RIr(t,e){t.results!=="success"&&(process.exitCode=1);for(let r of e)r.summarize(t)}function xIr(t,e){if(Array.from(t.targets.values()).filter(n=>!n.hidden).length===0&&!e)throw bIr.NoTargetFoundError}});var nst=A((y9n,rst)=>{"use strict";var TN=require("fs"),{Readable:BIr}=require("stream"),SN=require("path"),{promisify:iF}=require("util"),afe=ly(),NIr=iF(TN.readdir),PIr=iF(TN.stat),Jit=iF(TN.lstat),OIr=iF(TN.realpath),kIr="!",est="READDIRP_RECURSIVE_ERROR",DIr=new Set(["ENOENT","EPERM","EACCES","ELOOP",est]),cfe="files",tst="directories",rF="files_directories",tF="all",Kit=[cfe,tst,rF,tF],QIr=t=>DIr.has(t.code),[Xit,MIr]=process.versions.node.split(".").slice(0,2).map(t=>Number.parseInt(t,10)),LIr=process.platform==="win32"&&(Xit>10||Xit===10&&MIr>=5),Zit=t=>{if(t!==void 0){if(typeof t=="function")return t;if(typeof t=="string"){let e=afe(t.trim());return r=>e(r.basename)}if(Array.isArray(t)){let e=[],r=[];for(let n of t){let i=n.trim();i.charAt(0)===kIr?r.push(afe(i.slice(1))):e.push(afe(i))}return r.length>0?e.length>0?n=>e.some(i=>i(n.basename))&&!r.some(i=>i(n.basename)):n=>!r.some(i=>i(n.basename)):n=>e.some(i=>i(n.basename))}}},nF=class t extends BIr{static get defaultOptions(){return{root:".",fileFilter:e=>!0,directoryFilter:e=>!0,type:cfe,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(e={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:e.highWaterMark||4096});let r={...t.defaultOptions,...e},{root:n,type:i}=r;this._fileFilter=Zit(r.fileFilter),this._directoryFilter=Zit(r.directoryFilter);let s=r.lstat?Jit:PIr;LIr?this._stat=o=>s(o,{bigint:!0}):this._stat=s,this._maxDepth=r.depth,this._wantsDir=[tst,rF,tF].includes(i),this._wantsFile=[cfe,rF,tF].includes(i),this._wantsEverything=i===tF,this._root=SN.resolve(n),this._isDirent="Dirent"in TN&&!r.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(n,1)],this.reading=!1,this.parent=void 0}async _read(e){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&e>0;){let{path:r,depth:n,files:i=[]}=this.parent||{};if(i.length>0){let s=i.splice(0,e).map(o=>this._formatEntry(o,r));for(let o of await Promise.all(s)){if(this.destroyed)return;let a=await this._getEntryType(o);a==="directory"&&this._directoryFilter(o)?(n<=this._maxDepth&&this.parents.push(this._exploreDir(o.fullPath,n+1)),this._wantsDir&&(this.push(o),e--)):(a==="file"||this._includeAsFile(o))&&this._fileFilter(o)&&this._wantsFile&&(this.push(o),e--)}}else{let s=this.parents.pop();if(!s){this.push(null);break}if(this.parent=await s,this.destroyed)return}}}catch(r){this.destroy(r)}finally{this.reading=!1}}}async _exploreDir(e,r){let n;try{n=await NIr(e,this._rdOptions)}catch(i){this._onError(i)}return{files:n,depth:r,path:e}}async _formatEntry(e,r){let n;try{let i=this._isDirent?e.name:e,s=SN.resolve(SN.join(r,i));n={path:SN.relative(this._root,s),fullPath:s,basename:i},n[this._statsProp]=this._isDirent?e:await this._stat(s)}catch(i){this._onError(i)}return n}_onError(e){QIr(e)&&!this.destroyed?this.emit("warn",e):this.destroy(e)}async _getEntryType(e){let r=e&&e[this._statsProp];if(r){if(r.isFile())return"file";if(r.isDirectory())return"directory";if(r&&r.isSymbolicLink()){let n=e.fullPath;try{let i=await OIr(n),s=await Jit(i);if(s.isFile())return"file";if(s.isDirectory()){let o=i.length;if(n.startsWith(i)&&n.substr(o,1)===SN.sep){let a=new Error(`Circular symlink detected: "${n}" points to "${i}"`);return a.code=est,this._onError(a)}return"directory"}}catch(i){this._onError(i)}}}}_includeAsFile(e){let r=e&&e[this._statsProp];return r&&this._wantsEverything&&!r.isDirectory()}},S_=(t,e={})=>{let r=e.entryType||e.type;if(r==="both"&&(r=rF),r&&(e.type=r),t){if(typeof t!="string")throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(r&&!Kit.includes(r))throw new Error(`readdirp: Invalid type passed. Use one of ${Kit.join(", ")}`)}else throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");return e.root=t,new nF(e)},FIr=(t,e={})=>new Promise((r,n)=>{let i=[];S_(t,e).on("data",s=>i.push(s)).on("end",()=>r(i)).on("error",s=>n(s))});S_.promise=FIr;S_.ReaddirpStream=nF;S_.default=S_;rst.exports=S_});var lfe=A((E9n,ist)=>{ist.exports=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var r=t.length;if(r<=1)return t;var n="";if(r>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),n="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),n+s.join("/")}});var ust=A((cst,lst)=>{"use strict";Object.defineProperty(cst,"__esModule",{value:!0});var ast=ly(),qIr=lfe(),sst="!",UIr={returnIndex:!1},jIr=t=>Array.isArray(t)?t:[t],HIr=(t,e)=>{if(typeof t=="function")return t;if(typeof t=="string"){let r=ast(t,e);return n=>t===n||r(n)}return t instanceof RegExp?r=>t.test(r):r=>!1},ost=(t,e,r,n)=>{let i=Array.isArray(r),s=i?r[0]:r;if(!i&&typeof s!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(s));let o=qIr(s,!1);for(let c=0;c<e.length;c++){let l=e[c];if(l(o))return n?-1:!1}let a=i&&[o].concat(r.slice(1));for(let c=0;c<t.length;c++){let l=t[c];if(i?l(...a):l(o))return n?c:!0}return n?-1:!1},ufe=(t,e,r=UIr)=>{if(t==null)throw new TypeError("anymatch: specify first argument");let n=typeof r=="boolean"?{returnIndex:r}:r,i=n.returnIndex||!1,s=jIr(t),o=s.filter(c=>typeof c=="string"&&c.charAt(0)===sst).map(c=>c.slice(1)).map(c=>ast(c,n)),a=s.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==sst).map(c=>HIr(c,n));return e==null?(c,l=!1)=>ost(a,o,c,typeof l=="boolean"?l:!1):ost(a,o,e,i)};ufe.default=ufe;lst.exports=ufe});var dst=A((v9n,$Ir)=>{$Ir.exports=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]});var fst=A((C9n,pst)=>{pst.exports=dst()});var mst=A((b9n,hst)=>{"use strict";var zIr=require("path"),VIr=fst(),GIr=new Set(VIr);hst.exports=t=>GIr.has(zIr.extname(t).slice(1).toLowerCase())});var sF=A(et=>{"use strict";var{sep:YIr}=require("path"),{platform:dfe}=process,WIr=require("os");et.EV_ALL="all";et.EV_READY="ready";et.EV_ADD="add";et.EV_CHANGE="change";et.EV_ADD_DIR="addDir";et.EV_UNLINK="unlink";et.EV_UNLINK_DIR="unlinkDir";et.EV_RAW="raw";et.EV_ERROR="error";et.STR_DATA="data";et.STR_END="end";et.STR_CLOSE="close";et.FSEVENT_CREATED="created";et.FSEVENT_MODIFIED="modified";et.FSEVENT_DELETED="deleted";et.FSEVENT_MOVED="moved";et.FSEVENT_CLONED="cloned";et.FSEVENT_UNKNOWN="unknown";et.FSEVENT_TYPE_FILE="file";et.FSEVENT_TYPE_DIRECTORY="directory";et.FSEVENT_TYPE_SYMLINK="symlink";et.KEY_LISTENERS="listeners";et.KEY_ERR="errHandlers";et.KEY_RAW="rawEmitters";et.HANDLER_KEYS=[et.KEY_LISTENERS,et.KEY_ERR,et.KEY_RAW];et.DOT_SLASH=`.${YIr}`;et.BACK_SLASH_RE=/\\/g;et.DOUBLE_SLASH_RE=/\/\//;et.SLASH_OR_BACK_SLASH_RE=/[/\\]/;et.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/;et.REPLACER_RE=/^\.[/\\]/;et.SLASH="/";et.SLASH_SLASH="//";et.BRACE_START="{";et.BANG="!";et.ONE_DOT=".";et.TWO_DOTS="..";et.STAR="*";et.GLOBSTAR="**";et.ROOT_GLOBSTAR="/**/*";et.SLASH_GLOBSTAR="/**";et.DIR_SUFFIX="Dir";et.ANYMATCH_OPTS={dot:!0};et.STRING_TYPE="string";et.FUNCTION_TYPE="function";et.EMPTY_STR="";et.EMPTY_FN=()=>{};et.IDENTITY_FN=t=>t;et.isWindows=dfe==="win32";et.isMacos=dfe==="darwin";et.isLinux=dfe==="linux";et.isIBMi=WIr.type()==="OS400"});var Cst=A((_9n,vst)=>{"use strict";var zh=require("fs"),Qs=require("path"),{promisify:NN}=require("util"),JIr=mst(),{isWindows:KIr,isLinux:XIr,EMPTY_FN:ZIr,EMPTY_STR:eSr,KEY_LISTENERS:T_,KEY_ERR:pfe,KEY_RAW:RN,HANDLER_KEYS:tSr,EV_CHANGE:aF,EV_ADD:oF,EV_ADD_DIR:rSr,EV_ERROR:gst,STR_DATA:nSr,STR_END:iSr,BRACE_START:sSr,STAR:oSr}=sF(),aSr="watch",cSr=NN(zh.open),yst=NN(zh.stat),lSr=NN(zh.lstat),uSr=NN(zh.close),ffe=NN(zh.realpath),dSr={lstat:lSr,stat:yst},mfe=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},xN=(t,e,r)=>{let n=t[e];n instanceof Set||(t[e]=n=new Set([n])),n.add(r)},pSr=t=>e=>{let r=t[e];r instanceof Set?r.clear():delete t[e]},BN=(t,e,r)=>{let n=t[e];n instanceof Set?n.delete(r):n===r&&delete t[e]},Est=t=>t instanceof Set?t.size===0:!t,cF=new Map;function Ast(t,e,r,n,i){let s=(o,a)=>{r(t),i(o,a,{watchedPath:t}),a&&t!==a&&lF(Qs.resolve(t,a),T_,Qs.join(t,a))};try{return zh.watch(t,e,s)}catch(o){n(o)}}var lF=(t,e,r,n,i)=>{let s=cF.get(t);s&&mfe(s[e],o=>{o(r,n,i)})},fSr=(t,e,r,n)=>{let{listener:i,errHandler:s,rawEmitter:o}=n,a=cF.get(e),c;if(!r.persistent)return c=Ast(t,r,i,s,o),c.close.bind(c);if(a)xN(a,T_,i),xN(a,pfe,s),xN(a,RN,o);else{if(c=Ast(t,r,lF.bind(null,e,T_),s,lF.bind(null,e,RN)),!c)return;c.on(gst,async l=>{let u=lF.bind(null,e,pfe);if(a.watcherUnusable=!0,KIr&&l.code==="EPERM")try{let d=await cSr(t,"r");await uSr(d),u(l)}catch{}else u(l)}),a={listeners:i,errHandlers:s,rawEmitters:o,watcher:c},cF.set(e,a)}return()=>{BN(a,T_,i),BN(a,pfe,s),BN(a,RN,o),Est(a.listeners)&&(a.watcher.close(),cF.delete(e),tSr.forEach(pSr(a)),a.watcher=void 0,Object.freeze(a))}},hfe=new Map,hSr=(t,e,r,n)=>{let{listener:i,rawEmitter:s}=n,o=hfe.get(e),a=new Set,c=new Set,l=o&&o.options;return l&&(l.persistent<r.persistent||l.interval>r.interval)&&(a=o.listeners,c=o.rawEmitters,zh.unwatchFile(e),o=void 0),o?(xN(o,T_,i),xN(o,RN,s)):(o={listeners:i,rawEmitters:s,options:r,watcher:zh.watchFile(e,r,(u,d)=>{mfe(o.rawEmitters,f=>{f(aF,e,{curr:u,prev:d})});let p=u.mtimeMs;(u.size!==d.size||p>d.mtimeMs||p===0)&&mfe(o.listeners,f=>f(t,u))})},hfe.set(e,o)),()=>{BN(o,T_,i),BN(o,RN,s),Est(o.listeners)&&(hfe.delete(e),zh.unwatchFile(e),o.options=o.watcher=void 0,Object.freeze(o))}},Afe=class{constructor(e){this.fsw=e,this._boundHandleError=r=>e._handleError(r)}_watchWithNodeFs(e,r){let n=this.fsw.options,i=Qs.dirname(e),s=Qs.basename(e);this.fsw._getWatchedDir(i).add(s);let a=Qs.resolve(e),c={persistent:n.persistent};r||(r=ZIr);let l;return n.usePolling?(c.interval=n.enableBinaryInterval&&JIr(s)?n.binaryInterval:n.interval,l=hSr(e,a,c,{listener:r,rawEmitter:this.fsw._emitRaw})):l=fSr(e,a,c,{listener:r,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),l}_handleFile(e,r,n){if(this.fsw.closed)return;let i=Qs.dirname(e),s=Qs.basename(e),o=this.fsw._getWatchedDir(i),a=r;if(o.has(s))return;let c=async(u,d)=>{if(this.fsw._throttle(aSr,e,5)){if(!d||d.mtimeMs===0)try{let p=await yst(e);if(this.fsw.closed)return;let f=p.atimeMs,h=p.mtimeMs;(!f||f<=h||h!==a.mtimeMs)&&this.fsw._emit(aF,e,p),XIr&&a.ino!==p.ino?(this.fsw._closeFile(u),a=p,this.fsw._addPathCloser(u,this._watchWithNodeFs(e,c))):a=p}catch{this.fsw._remove(i,s)}else if(o.has(s)){let p=d.atimeMs,f=d.mtimeMs;(!p||p<=f||f!==a.mtimeMs)&&this.fsw._emit(aF,e,d),a=d}}},l=this._watchWithNodeFs(e,c);if(!(n&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(oF,e,0))return;this.fsw._emit(oF,e,r)}return l}async _handleSymlink(e,r,n,i){if(this.fsw.closed)return;let s=e.fullPath,o=this.fsw._getWatchedDir(r);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let a;try{a=await ffe(n)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(o.has(i)?this.fsw._symlinkPaths.get(s)!==a&&(this.fsw._symlinkPaths.set(s,a),this.fsw._emit(aF,n,e.stats)):(o.add(i),this.fsw._symlinkPaths.set(s,a),this.fsw._emit(oF,n,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(s))return!0;this.fsw._symlinkPaths.set(s,!0)}_handleRead(e,r,n,i,s,o,a){if(e=Qs.join(e,eSr),!n.hasGlob&&(a=this.fsw._throttle("readdir",e,1e3),!a))return;let c=this.fsw._getWatchedDir(n.path),l=new Set,u=this.fsw._readdirp(e,{fileFilter:d=>n.filterPath(d),directoryFilter:d=>n.filterDir(d),depth:0}).on(nSr,async d=>{if(this.fsw.closed){u=void 0;return}let p=d.path,f=Qs.join(e,p);if(l.add(p),!(d.stats.isSymbolicLink()&&await this._handleSymlink(d,e,f,p))){if(this.fsw.closed){u=void 0;return}(p===i||!i&&!c.has(p))&&(this.fsw._incrReadyCount(),f=Qs.join(s,Qs.relative(s,f)),this._addToNodeFs(f,r,n,o+1))}}).on(gst,this._boundHandleError);return new Promise(d=>u.once(iSr,()=>{if(this.fsw.closed){u=void 0;return}let p=a?a.clear():!1;d(),c.getChildren().filter(f=>f!==e&&!l.has(f)&&(!n.hasGlob||n.filterPath({fullPath:Qs.resolve(e,f)}))).forEach(f=>{this.fsw._remove(e,f)}),u=void 0,p&&this._handleRead(e,!1,n,i,s,o,a)}))}async _handleDir(e,r,n,i,s,o,a){let c=this.fsw._getWatchedDir(Qs.dirname(e)),l=c.has(Qs.basename(e));!(n&&this.fsw.options.ignoreInitial)&&!s&&!l&&(!o.hasGlob||o.globFilter(e))&&this.fsw._emit(rSr,e,r),c.add(Qs.basename(e)),this.fsw._getWatchedDir(e);let u,d,p=this.fsw.options.depth;if((p==null||i<=p)&&!this.fsw._symlinkPaths.has(a)){if(!s&&(await this._handleRead(e,n,o,s,e,i,u),this.fsw.closed))return;d=this._watchWithNodeFs(e,(f,h)=>{h&&h.mtimeMs===0||this._handleRead(f,!1,o,s,e,i,u)})}return d}async _addToNodeFs(e,r,n,i,s){let o=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return o(),!1;let a=this.fsw._getWatchHelpers(e,i);!a.hasGlob&&n&&(a.hasGlob=n.hasGlob,a.globFilter=n.globFilter,a.filterPath=c=>n.filterPath(c),a.filterDir=c=>n.filterDir(c));try{let c=await dSr[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,c))return o(),!1;let l=this.fsw.options.followSymlinks&&!e.includes(oSr)&&!e.includes(sSr),u;if(c.isDirectory()){let d=Qs.resolve(e),p=l?await ffe(e):e;if(this.fsw.closed||(u=await this._handleDir(a.watchPath,c,r,i,s,a,p),this.fsw.closed))return;d!==p&&p!==void 0&&this.fsw._symlinkPaths.set(d,p)}else if(c.isSymbolicLink()){let d=l?await ffe(e):e;if(this.fsw.closed)return;let p=Qs.dirname(a.watchPath);if(this.fsw._getWatchedDir(p).add(a.watchPath),this.fsw._emit(oF,a.watchPath,c),u=await this._handleDir(p,c,r,i,e,a,d),this.fsw.closed)return;d!==void 0&&this.fsw._symlinkPaths.set(Qs.resolve(e),d)}else u=this._handleFile(a.watchPath,c,r);return o(),this.fsw._addPathCloser(e,u),!1}catch(c){if(this.fsw._handleError(c))return o(),e}}};vst.exports=Afe});var Rst=A((I9n,_fe)=>{"use strict";var bfe=require("fs"),Ms=require("path"),{promisify:wfe}=require("util"),R_;try{R_=require("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(R_){let t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){let e=Number.parseInt(t[1],10),r=Number.parseInt(t[2],10);e===8&&r<16&&(R_=void 0)}}var{EV_ADD:gfe,EV_CHANGE:mSr,EV_ADD_DIR:bst,EV_UNLINK:uF,EV_ERROR:ASr,STR_DATA:gSr,STR_END:ySr,FSEVENT_CREATED:ESr,FSEVENT_MODIFIED:vSr,FSEVENT_DELETED:CSr,FSEVENT_MOVED:bSr,FSEVENT_UNKNOWN:wSr,FSEVENT_TYPE_FILE:_Sr,FSEVENT_TYPE_DIRECTORY:PN,FSEVENT_TYPE_SYMLINK:Tst,ROOT_GLOBSTAR:wst,DIR_SUFFIX:ISr,DOT_SLASH:_st,FUNCTION_TYPE:yfe,EMPTY_FN:SSr,IDENTITY_FN:TSr}=sF(),RSr=t=>isNaN(t)?{}:{depth:t},vfe=wfe(bfe.stat),xSr=wfe(bfe.lstat),Ist=wfe(bfe.realpath),BSr={stat:vfe,lstat:xSr},ME=new Map,NSr=10,PSr=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),OSr=(t,e)=>({stop:R_.watch(t,e)});function kSr(t,e,r,n){let i=Ms.extname(e)?Ms.dirname(e):e,s=Ms.dirname(i),o=ME.get(i);DSr(s)&&(i=s);let a=Ms.resolve(t),c=a!==e,l=(d,p,f)=>{c&&(d=d.replace(e,a)),(d===a||!d.indexOf(a+Ms.sep))&&r(d,p,f)},u=!1;for(let d of ME.keys())if(e.indexOf(Ms.resolve(d)+Ms.sep)===0){i=d,o=ME.get(i),u=!0;break}return o||u?o.listeners.add(l):(o={listeners:new Set([l]),rawEmitter:n,watcher:OSr(i,(d,p)=>{if(!o.listeners.size)return;let f=R_.getInfo(d,p);o.listeners.forEach(h=>{h(d,p,f)}),o.rawEmitter(f.event,d,f)})},ME.set(i,o)),()=>{let d=o.listeners;if(d.delete(l),!d.size&&(ME.delete(i),o.watcher))return o.watcher.stop().then(()=>{o.rawEmitter=o.watcher=void 0,Object.freeze(o)})}}var DSr=t=>{let e=0;for(let r of ME.keys())if(r.indexOf(t)===0&&(e++,e>=NSr))return!0;return!1},QSr=()=>R_&&ME.size<128,Efe=(t,e)=>{let r=0;for(;!t.indexOf(e)&&(t=Ms.dirname(t))!==e;)r++;return r},Sst=(t,e)=>t.type===PN&&e.isDirectory()||t.type===Tst&&e.isSymbolicLink()||t.type===_Sr&&e.isFile(),Cfe=class{constructor(e){this.fsw=e}checkIgnored(e,r){let n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,r))return n.add(e),r&&r.isDirectory()&&n.add(e+wst),!0;n.delete(e),n.delete(e+wst)}addOrChange(e,r,n,i,s,o,a,c){let l=s.has(o)?mSr:gfe;this.handleEvent(l,e,r,n,i,s,o,a,c)}async checkExists(e,r,n,i,s,o,a,c){try{let l=await vfe(e);if(this.fsw.closed)return;Sst(a,l)?this.addOrChange(e,r,n,i,s,o,a,c):this.handleEvent(uF,e,r,n,i,s,o,a,c)}catch(l){l.code==="EACCES"?this.addOrChange(e,r,n,i,s,o,a,c):this.handleEvent(uF,e,r,n,i,s,o,a,c)}}handleEvent(e,r,n,i,s,o,a,c,l){if(!(this.fsw.closed||this.checkIgnored(r)))if(e===uF){let u=c.type===PN;(u||o.has(a))&&this.fsw._remove(s,a,u)}else{if(e===gfe){if(c.type===PN&&this.fsw._getWatchedDir(r),c.type===Tst&&l.followSymlinks){let d=l.depth===void 0?void 0:Efe(n,i)+1;return this._addToFsEvents(r,!1,!0,d)}this.fsw._getWatchedDir(s).add(a)}let u=c.type===PN?e+ISr:e;this.fsw._emit(u,r),u===bst&&this._addToFsEvents(r,!1,!0)}}_watchWithFsEvents(e,r,n,i){if(this.fsw.closed||this.fsw._isIgnored(e))return;let s=this.fsw.options,a=kSr(e,r,async(c,l,u)=>{if(this.fsw.closed||s.depth!==void 0&&Efe(c,r)>s.depth)return;let d=n(Ms.join(e,Ms.relative(e,c)));if(i&&!i(d))return;let p=Ms.dirname(d),f=Ms.basename(d),h=this.fsw._getWatchedDir(u.type===PN?d:p);if(PSr.has(l)||u.event===wSr)if(typeof s.ignored===yfe){let m;try{m=await vfe(d)}catch{}if(this.fsw.closed||this.checkIgnored(d,m))return;Sst(u,m)?this.addOrChange(d,c,r,p,h,f,u,s):this.handleEvent(uF,d,c,r,p,h,f,u,s)}else this.checkExists(d,c,r,p,h,f,u,s);else switch(u.event){case ESr:case vSr:return this.addOrChange(d,c,r,p,h,f,u,s);case CSr:case bSr:return this.checkExists(d,c,r,p,h,f,u,s)}},this.fsw._emitRaw);return this.fsw._emitReady(),a}async _handleFsEventsSymlink(e,r,n,i){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(r))){this.fsw._symlinkPaths.set(r,!0),this.fsw._incrReadyCount();try{let s=await Ist(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(s))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(s||e,o=>{let a=e;return s&&s!==_st?a=o.replace(s,e):o!==_st&&(a=Ms.join(e,o)),n(a)},!1,i)}catch(s){if(this.fsw._handleError(s))return this.fsw._emitReady()}}}emitAdd(e,r,n,i,s){let o=n(e),a=r.isDirectory(),c=this.fsw._getWatchedDir(Ms.dirname(o)),l=Ms.basename(o);a&&this.fsw._getWatchedDir(o),!c.has(l)&&(c.add(l),(!i.ignoreInitial||s===!0)&&this.fsw._emit(a?bst:gfe,o,r))}initWatch(e,r,n,i){if(this.fsw.closed)return;let s=this._watchWithFsEvents(n.watchPath,Ms.resolve(e||n.watchPath),i,n.globFilter);this.fsw._addPathCloser(r,s)}async _addToFsEvents(e,r,n,i){if(this.fsw.closed)return;let s=this.fsw.options,o=typeof r===yfe?r:TSr,a=this.fsw._getWatchHelpers(e);try{let c=await BSr[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,c))throw null;if(c.isDirectory()){if(a.globFilter||this.emitAdd(o(e),c,o,s,n),i&&i>s.depth)return;this.fsw._readdirp(a.watchPath,{fileFilter:l=>a.filterPath(l),directoryFilter:l=>a.filterDir(l),...RSr(s.depth-(i||0))}).on(gSr,l=>{if(this.fsw.closed||l.stats.isDirectory()&&!a.filterPath(l))return;let u=Ms.join(a.watchPath,l.path),{fullPath:d}=l;if(a.followSymlinks&&l.stats.isSymbolicLink()){let p=s.depth===void 0?void 0:Efe(u,Ms.resolve(a.watchPath))+1;this._handleFsEventsSymlink(u,d,o,p)}else this.emitAdd(u,l.stats,o,s,n)}).on(ASr,SSr).on(ySr,()=>{this.fsw._emitReady()})}else this.emitAdd(a.watchPath,c,o,s,n),this.fsw._emitReady()}catch(c){(!c||this.fsw._handleError(c))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(s.persistent&&n!==!0)if(typeof r===yfe)this.initWatch(void 0,e,a,o);else{let c;try{c=await Ist(a.watchPath)}catch{}this.initWatch(c,e,a,o)}}};_fe.exports=Cfe;_fe.exports.canUse=QSr});var Fst=A(Ffe=>{"use strict";var{EventEmitter:MSr}=require("events"),Mfe=require("fs"),zr=require("path"),{promisify:Dst}=require("util"),LSr=nst(),Bfe=ust().default,FSr=YT(),Ife=NG(),qSr=JT(),USr=lfe(),jSr=Cst(),xst=Rst(),{EV_ALL:Sfe,EV_READY:HSr,EV_ADD:dF,EV_CHANGE:ON,EV_UNLINK:Bst,EV_ADD_DIR:$Sr,EV_UNLINK_DIR:zSr,EV_RAW:VSr,EV_ERROR:Tfe,STR_CLOSE:GSr,STR_END:YSr,BACK_SLASH_RE:WSr,DOUBLE_SLASH_RE:Nst,SLASH_OR_BACK_SLASH_RE:JSr,DOT_RE:KSr,REPLACER_RE:XSr,SLASH:Rfe,SLASH_SLASH:ZSr,BRACE_START:eTr,BANG:Nfe,ONE_DOT:Qst,TWO_DOTS:tTr,GLOBSTAR:rTr,SLASH_GLOBSTAR:xfe,ANYMATCH_OPTS:Pfe,STRING_TYPE:Lfe,FUNCTION_TYPE:nTr,EMPTY_STR:Ofe,EMPTY_FN:iTr,isWindows:sTr,isMacos:oTr,isIBMi:aTr}=sF(),cTr=Dst(Mfe.stat),lTr=Dst(Mfe.readdir),kfe=(t=[])=>Array.isArray(t)?t:[t],Mst=(t,e=[])=>(t.forEach(r=>{Array.isArray(r)?Mst(r,e):e.push(r)}),e),Pst=t=>{let e=Mst(kfe(t));if(!e.every(r=>typeof r===Lfe))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(Lst)},Ost=t=>{let e=t.replace(WSr,Rfe),r=!1;for(e.startsWith(ZSr)&&(r=!0);e.match(Nst);)e=e.replace(Nst,Rfe);return r&&(e=Rfe+e),e},Lst=t=>Ost(zr.normalize(Ost(t))),kst=(t=Ofe)=>e=>typeof e!==Lfe?e:Lst(zr.isAbsolute(e)?e:zr.join(t,e)),uTr=(t,e)=>zr.isAbsolute(t)?t:t.startsWith(Nfe)?Nfe+zr.join(e,t.slice(1)):zr.join(e,t),md=(t,e)=>t[e]===void 0,Dfe=class{constructor(e,r){this.path=e,this._removeWatcher=r,this.items=new Set}add(e){let{items:r}=this;r&&e!==Qst&&e!==tTr&&r.add(e)}async remove(e){let{items:r}=this;if(!r||(r.delete(e),r.size>0))return;let n=this.path;try{await lTr(n)}catch{this._removeWatcher&&this._removeWatcher(zr.dirname(n),zr.basename(n))}}has(e){let{items:r}=this;if(r)return r.has(e)}getChildren(){let{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}},dTr="stat",pTr="lstat",Qfe=class{constructor(e,r,n,i){this.fsw=i,this.path=e=e.replace(XSr,Ofe),this.watchPath=r,this.fullWatchPath=zr.resolve(r),this.hasGlob=r!==e,e===Ofe&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&n?void 0:!1,this.globFilter=this.hasGlob?Bfe(e,void 0,Pfe):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(s=>{s.length>1&&s.pop()}),this.followSymlinks=n,this.statMethod=n?dTr:pTr}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return zr.join(this.watchPath,zr.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){let{stats:r}=e;if(r&&r.isSymbolicLink())return this.filterDir(e);let n=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===nTr?this.globFilter(n):!0)&&this.fsw._isntIgnored(n,r)&&this.fsw._hasReadPermissions(r)}getDirParts(e){if(!this.hasGlob)return[];let r=[];return(e.includes(eTr)?qSr.expand(e):[e]).forEach(i=>{r.push(zr.relative(this.watchPath,i).split(JSr))}),r}filterDir(e){if(this.hasGlob){let r=this.getDirParts(this.checkGlobSymlink(e)),n=!1;this.unmatchedGlob=!this.dirParts.some(i=>i.every((s,o)=>(s===rTr&&(n=!0),n||!r[0][o]||Bfe(s,r[0][o],Pfe))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}},pF=class extends MSr{constructor(e){super();let r={};e&&Object.assign(r,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,md(r,"persistent")&&(r.persistent=!0),md(r,"ignoreInitial")&&(r.ignoreInitial=!1),md(r,"ignorePermissionErrors")&&(r.ignorePermissionErrors=!1),md(r,"interval")&&(r.interval=100),md(r,"binaryInterval")&&(r.binaryInterval=300),md(r,"disableGlobbing")&&(r.disableGlobbing=!1),r.enableBinaryInterval=r.binaryInterval!==r.interval,md(r,"useFsEvents")&&(r.useFsEvents=!r.usePolling),xst.canUse()||(r.useFsEvents=!1),md(r,"usePolling")&&!r.useFsEvents&&(r.usePolling=oTr),aTr&&(r.usePolling=!0);let i=process.env.CHOKIDAR_USEPOLLING;if(i!==void 0){let c=i.toLowerCase();c==="false"||c==="0"?r.usePolling=!1:c==="true"||c==="1"?r.usePolling=!0:r.usePolling=!!c}let s=process.env.CHOKIDAR_INTERVAL;s&&(r.interval=Number.parseInt(s,10)),md(r,"atomic")&&(r.atomic=!r.usePolling&&!r.useFsEvents),r.atomic&&(this._pendingUnlinks=new Map),md(r,"followSymlinks")&&(r.followSymlinks=!0),md(r,"awaitWriteFinish")&&(r.awaitWriteFinish=!1),r.awaitWriteFinish===!0&&(r.awaitWriteFinish={});let o=r.awaitWriteFinish;o&&(o.stabilityThreshold||(o.stabilityThreshold=2e3),o.pollInterval||(o.pollInterval=100),this._pendingWrites=new Map),r.ignored&&(r.ignored=kfe(r.ignored));let a=0;this._emitReady=()=>{a++,a>=this._readyCount&&(this._emitReady=iTr,this._readyEmitted=!0,process.nextTick(()=>this.emit(HSr)))},this._emitRaw=(...c)=>this.emit(VSr,...c),this._readyEmitted=!1,this.options=r,r.useFsEvents?this._fsEventsHandler=new xst(this):this._nodeFsHandler=new jSr(this),Object.freeze(r)}add(e,r,n){let{cwd:i,disableGlobbing:s}=this.options;this.closed=!1;let o=Pst(e);return i&&(o=o.map(a=>{let c=uTr(a,i);return s||!Ife(a)?c:USr(c)})),o=o.filter(a=>a.startsWith(Nfe)?(this._ignoredPaths.add(a.slice(1)),!1):(this._ignoredPaths.delete(a),this._ignoredPaths.delete(a+xfe),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=o.length),this.options.persistent&&(this._readyCount*=2),o.forEach(a=>this._fsEventsHandler._addToFsEvents(a))):(this._readyCount||(this._readyCount=0),this._readyCount+=o.length,Promise.all(o.map(async a=>{let c=await this._nodeFsHandler._addToNodeFs(a,!n,0,0,r);return c&&this._emitReady(),c})).then(a=>{this.closed||a.filter(c=>c).forEach(c=>{this.add(zr.dirname(c),zr.basename(r||c))})})),this}unwatch(e){if(this.closed)return this;let r=Pst(e),{cwd:n}=this.options;return r.forEach(i=>{!zr.isAbsolute(i)&&!this._closers.has(i)&&(n&&(i=zr.join(n,i)),i=zr.resolve(i)),this._closePath(i),this._ignoredPaths.add(i),this._watched.has(i)&&this._ignoredPaths.add(i+xfe),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();let e=[];return this._closers.forEach(r=>r.forEach(n=>{let i=n();i instanceof Promise&&e.push(i)})),this._streams.forEach(r=>r.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(r=>r.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(r=>{this[`_${r}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){let e={};return this._watched.forEach((r,n)=>{let i=this.options.cwd?zr.relative(this.options.cwd,n):n;e[i||Qst]=r.getChildren().sort()}),e}emitWithAll(e,r){this.emit(...r),e!==Tfe&&this.emit(Sfe,...r)}async _emit(e,r,n,i,s){if(this.closed)return;let o=this.options;sTr&&(r=zr.normalize(r)),o.cwd&&(r=zr.relative(o.cwd,r));let a=[e,r];s!==void 0?a.push(n,i,s):i!==void 0?a.push(n,i):n!==void 0&&a.push(n);let c=o.awaitWriteFinish,l;if(c&&(l=this._pendingWrites.get(r)))return l.lastChange=new Date,this;if(o.atomic){if(e===Bst)return this._pendingUnlinks.set(r,a),setTimeout(()=>{this._pendingUnlinks.forEach((u,d)=>{this.emit(...u),this.emit(Sfe,...u),this._pendingUnlinks.delete(d)})},typeof o.atomic=="number"?o.atomic:100),this;e===dF&&this._pendingUnlinks.has(r)&&(e=a[0]=ON,this._pendingUnlinks.delete(r))}if(c&&(e===dF||e===ON)&&this._readyEmitted){let u=(d,p)=>{d?(e=a[0]=Tfe,a[1]=d,this.emitWithAll(e,a)):p&&(a.length>2?a[2]=p:a.push(p),this.emitWithAll(e,a))};return this._awaitWriteFinish(r,c.stabilityThreshold,e,u),this}if(e===ON&&!this._throttle(ON,r,50))return this;if(o.alwaysStat&&n===void 0&&(e===dF||e===$Sr||e===ON)){let u=o.cwd?zr.join(o.cwd,r):r,d;try{d=await cTr(u)}catch{}if(!d||this.closed)return;a.push(d)}return this.emitWithAll(e,a),this}_handleError(e){let r=e&&e.code;return e&&r!=="ENOENT"&&r!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||r!=="EPERM"&&r!=="EACCES")&&this.emit(Tfe,e),e||this.closed}_throttle(e,r,n){this._throttled.has(e)||this._throttled.set(e,new Map);let i=this._throttled.get(e),s=i.get(r);if(s)return s.count++,!1;let o,a=()=>{let l=i.get(r),u=l?l.count:0;return i.delete(r),clearTimeout(o),l&&clearTimeout(l.timeoutObject),u};o=setTimeout(a,n);let c={timeoutObject:o,clear:a,count:0};return i.set(r,c),c}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,r,n,i){let s,o=e;this.options.cwd&&!zr.isAbsolute(e)&&(o=zr.join(this.options.cwd,e));let a=new Date,c=l=>{Mfe.stat(o,(u,d)=>{if(u||!this._pendingWrites.has(e)){u&&u.code!=="ENOENT"&&i(u);return}let p=Number(new Date);l&&d.size!==l.size&&(this._pendingWrites.get(e).lastChange=p);let f=this._pendingWrites.get(e);p-f.lastChange>=r?(this._pendingWrites.delete(e),i(void 0,d)):s=setTimeout(c,this.options.awaitWriteFinish.pollInterval,d)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:a,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(s),n)}),s=setTimeout(c,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,r){if(this.options.atomic&&KSr.test(e))return!0;if(!this._userIgnored){let{cwd:n}=this.options,i=this.options.ignored,s=i&&i.map(kst(n)),o=kfe(s).filter(c=>typeof c===Lfe&&!Ife(c)).map(c=>c+xfe),a=this._getGlobIgnored().map(kst(n)).concat(s,o);this._userIgnored=Bfe(a,void 0,Pfe)}return this._userIgnored([e,r])}_isntIgnored(e,r){return!this._isIgnored(e,r)}_getWatchHelpers(e,r){let n=r||this.options.disableGlobbing||!Ife(e)?e:FSr(e),i=this.options.followSymlinks;return new Qfe(e,n,i,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));let r=zr.resolve(e);return this._watched.has(r)||this._watched.set(r,new Dfe(r,this._boundRemove)),this._watched.get(r)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;let n=(e&&Number.parseInt(e.mode,10))&511;return!!(4&Number.parseInt(n.toString(8)[0],10))}_remove(e,r,n){let i=zr.join(e,r),s=zr.resolve(i);if(n=n??(this._watched.has(i)||this._watched.has(s)),!this._throttle("remove",i,100))return;!n&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,r,!0),this._getWatchedDir(i).getChildren().forEach(p=>this._remove(i,p));let c=this._getWatchedDir(e),l=c.has(r);c.remove(r),this._symlinkPaths.has(s)&&this._symlinkPaths.delete(s);let u=i;if(this.options.cwd&&(u=zr.relative(this.options.cwd,i)),this.options.awaitWriteFinish&&this._pendingWrites.has(u)&&this._pendingWrites.get(u).cancelWait()===dF)return;this._watched.delete(i),this._watched.delete(s);let d=n?zSr:Bst;l&&!this._isIgnored(i)&&this._emit(d,i),this.options.useFsEvents||this._closePath(i)}_closePath(e){this._closeFile(e);let r=zr.dirname(e);this._getWatchedDir(r).remove(zr.basename(e))}_closeFile(e){let r=this._closers.get(e);r&&(r.forEach(n=>n()),this._closers.delete(e))}_addPathCloser(e,r){if(!r)return;let n=this._closers.get(e);n||(n=[],this._closers.set(e,n)),n.push(r)}_readdirp(e,r){if(this.closed)return;let n={type:Sfe,alwaysStat:!0,lstat:!0,...r},i=LSr(e,n);return this._streams.add(i),i.once(GSr,()=>{i=void 0}),i.once(YSr,()=>{i&&(this._streams.delete(i),i=void 0)}),i}};Ffe.FSWatcher=pF;var fTr=(t,e)=>{let r=new pF(e);return r.add(t),r};Ffe.watch=fTr});var qst=A(jfe=>{"use strict";Object.defineProperty(jfe,"__esModule",{value:!0});Object.defineProperty(jfe,"watch",{enumerable:!0,get:function(){return gTr}});var hTr=Ufe(Fst()),qfe=Ufe(require("path")),mTr=cs(),ATr=Ufe(require("events"));function Ufe(t){return t&&t.__esModule?t:{default:t}}function gTr(t,e){let r=new ATr.default,n=(0,mTr.getWorkspaceRoot)(t),i=yTr(n,e),s=Object.values(e).map(c=>qfe.default.dirname(c.packageJsonPath)),o=hTr.default.watch(s,{cwd:n,ignored:["**/node_modules/**","**/dist/**","**/build/**","**/lib/**"]}),a;return o.on("change",c=>{a&&clearTimeout(a),a=setTimeout(()=>{let l=ETr(c,i);r.emit("change",l)},200)}),r}function yTr(t,e){let r={};for(let[n,i]of Object.entries(e)){let o=qfe.default.relative(t,qfe.default.dirname(i.packageJsonPath)).split(/[/\\]/),a=r;for(let c of o)a[c]||(a[c]={}),a=a[c];a.packageName=n}return r}function ETr(t,e){let r=t.split(/[/\\]/),n=e;for(let i of r){if(!n[i]){console.log(i,t);break}if(n[i].packageName)return n[i].packageName;n=n[i]}}});var zst=A(Hfe=>{"use strict";Object.defineProperty(Hfe,"__esModule",{value:!0});Object.defineProperty(Hfe,"watchAction",{enumerable:!0,get:function(){return xTr}});var vTr=sP(),CTr=cb(),fF=Zd(),Ust=cs(),bTr=AK(),wTr=WZ(),_Tr=npe(),ITr=qst(),jst=RTr(Ya()),STr=tfe(),TTr=IN();function $st(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return($st=function(n){return n?r:e})(t)}function RTr(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=$st(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=t[s]}return n.default=t,r&&r.set(t,n),n}async function xTr(t,e){let r=process.cwd(),n=await(0,fF.getConfig)(r),i=(0,fF.getConcurrency)(t.concurrency,n.concurrency),s=(0,jst.default)(),o=new wTr.LogReporter({logLevel:jst.LogLevel[t.logLevel]});s.addReporter(o);let a=(0,Ust.getWorkspaceRoot)(process.cwd()),c=await(0,Ust.getPackageInfosAsync)(a),{tasks:l,taskArgs:u}=(0,CTr.filterArgsForTasks)(e.args),d=await(0,vTr.createTargetGraph)({logger:s,root:a,dependencies:t.dependencies,dependents:t.dependents&&!t.to,ignore:t.ignore.concat(n.ignore),pipeline:n.pipeline,repoWideChanges:n.repoWideChanges,scope:(t.scope??[]).concat(t.to??[]),since:t.since,outputs:n.cacheOptions.outputGlob,tasks:l,packageInfos:c,priorities:n.priorities});n.cacheOptions.writeRemoteCache=!1;let p=(0,bTr.filterPipelineDefinitions)(d.targets.values(),n.pipeline),f=(0,fF.getMaxWorkersPerTaskFromOptions)(t.maxWorkersPerTask),{hasher:h}=await(0,STr.createCache)({root:a,logger:s,cacheOptions:n.cacheOptions,cliArgs:u,skipLocalCache:t.skipLocalCache}),m=new _Tr.SimpleScheduler({logger:s,concurrency:i,continueOnError:!0,workerData:{root:a,taskArgs:u,skipLocalCache:t.skipLocalCache,cacheOptions:n.cacheOptions,runners:{...(0,TTr.runnerPickerOptions)(t.nodeArg,n.npmClient,u),...n.runners}},shouldCache:t.cache,shouldResetCache:t.resetCache,maxWorkersPerTask:new Map([...(0,fF.getMaxWorkersPerTask)(p,i),...f]),hasher:h,workerIdleMemoryLimit:n.workerIdleMemoryLimit}),E=await m.run(a,d);Hst(E,s.reporters),s.info("Running scheduler in watch mode");for(let b of m.targetRuns.values())b.options.shouldCache=!1;(await(0,ITr.watch)(a,c)).on("change",async b=>{o.resetLogEntries();let v=new Map;for(let _ of d.targets.values())_.packageName===b&&v.set(_.id,_);let y={targets:v},g=await m.run(a,y,!0);Hst(g,s.reporters)})}function Hst(t,e){var r;for(let n of e)n.summarize(t),(r=n.cleanup)==null||r.call(n)}});var Vst=A($fe=>{"use strict";Object.defineProperty($fe,"__esModule",{value:!0});Object.defineProperty($fe,"action",{enumerable:!0,get:function(){return PTr}});var BTr=Wit(),NTr=zst();async function PTr(t,e){return t.watch?(0,NTr.watchAction)(t,e):(0,BTr.runAction)(t,e)}});var Yst=A(zfe=>{"use strict";Object.defineProperty(zfe,"__esModule",{value:!0});Object.defineProperty(zfe,"options",{enumerable:!0,get:function(){return kTr}});var jr=kf(),Gst=process.env.CI||process.env.TF_BUILD,OTr={logger:{reporter:new jr.Option("--reporter <reporter...>","reporter"),grouped:new jr.Option("--grouped","groups the logs").default(!1),progress:new jr.Option("--progress").conflicts(["reporter","grouped","verbose"]).default(!Gst),logLevel:new jr.Option("--log-level <level>","log level").choices(["info","warn","error","verbose","silly"]).conflicts("verbose"),logFile:new jr.Option("--log-file <file>","when used with --reporter vfl, writes verbose, ungrouped logs to the specified file"),verbose:new jr.Option("--verbose","verbose output").default(!1),indented:new jr.Option("--indented","enabled indentation of the JSON output").default(!1)},pool:{concurrency:new jr.Option("-c|--concurrency <number>","max jobs to run at a time").argParser(t=>parseInt(t)),continue:new jr.Option("--continue","continue running even after encountering an error for one of the targets"),maxWorkersPerTask:new jr.Option("--max-workers-per-task <maxWorkersPerTarget...>","set max worker per task, e.g. --max-workers-per-task build=2 test=4").default([])},runner:{nodeArg:new jr.Option("-n|--node-arg <arg>",'node arguments as a string to be passed into node like a NODE_OPTIONS setting, (e.g. --nodearg="--max_old_space_size=1234 --heap-prof")')},run:{cache:new jr.Option("--no-cache","disables the cache"),resetCache:new jr.Option("--reset-cache","resets the cache, filling it after a run"),skipLocalCache:new jr.Option("--skip-local-cache","skips caching locally (defaults to true in CI environments)").default(Gst),profile:new jr.Option("--profile [profile]","writes a run profile into a file that can be processed by Chromium devtool"),continue:new jr.Option("--continue","continues the run even on error"),allowNoTargetRuns:new jr.Option("--allow-no-target-runs"),watch:new jr.Option("--watch","runs in watch mode")},server:{server:new jr.Option("--server [host:port]","Run targets of type 'worker' on a background service"),tasks:new jr.Option("--tasks <tasks...>","A list of tasks to run, separated by space e.g. 'build test'"),timeout:new jr.Option("-t|--timeout <seconds>","lage server autoshutoff timeout").default(5*60).argParser(t=>parseInt(t))},filter:{scope:new jr.Option("--scope <scope...>","scopes the run to a subset of packages (by default, includes the dependencies and dependents as well)"),noDeps:new jr.Option("--no-deps|--no-dependents","disables running any dependents of the scoped packages"),includeDependencies:new jr.Option("--include-dependencies|--dependencies",'adds the scoped packages dependencies as the "entry points" for the target graph run'),to:new jr.Option("--to <scope...>","runs up to a package (shorthand for --scope=<scope...> --no-dependents)"),since:new jr.Option("--since <since>","only runs packages that have changed since the given commit, tag, or branch"),ignore:new jr.Option("--ignore <ignore...>","ignores files when calculating the scope with `--since` in addition to the files specified in lage.config").default([])},affected:{outputFormat:new jr.Option("--output-format <graph|json|default>",'Generate a report about what packages are affected by the current change (defaults to human readable format) "graph" will generate a GraphViz .dot file format')},cache:{prune:new jr.Option("--prune <days>","Prunes cache older than certain number of <days>").argParser(parseInt).conflicts("--clear"),clear:new jr.Option("--clear","Clears the cache locally")}},kTr=DTr(OTr);function DTr(t){for(let e in t)for(let[r,n]of Object.entries(t[e])){let i=e.replace(/([A-Z])/g,"_$1").toUpperCase(),s=r.replace(/([A-Z])/g,"_$1").toUpperCase();n.env(`LAGE_${i}_${s}`)}return t}});var x_=A(Vfe=>{"use strict";Object.defineProperty(Vfe,"__esModule",{value:!0});Object.defineProperty(Vfe,"addOptions",{enumerable:!0,get:function(){return MTr}});var QTr=Yst();function MTr(t,e){for(let r of Object.values(QTr.options[t]))e.addOption(r);return e}});var Wst=A(Gfe=>{"use strict";Object.defineProperty(Gfe,"__esModule",{value:!0});Object.defineProperty(Gfe,"runCommand",{enumerable:!0,get:function(){return LE}});var LTr=kf(),FTr=Vst(),kN=x_(),LE=new LTr.Command("run");(0,kN.addOptions)("filter",LE);(0,kN.addOptions)("logger",LE);(0,kN.addOptions)("pool",LE);(0,kN.addOptions)("runner",LE);(0,kN.addOptions)("run",LE);LE.action(FTr.action).allowUnknownOption(!0).addHelpCommand("[run] command1 [command2...commandN] [options]","run commands").addHelpText("after",`
 Runs a set of commands in a target graph. The targets are defined by packages and their scripts as defined the package.json files.
 
